---
title: "Session 3: building containers"
teaching: 10
exercises: 50
questions:
objectives:
---


### Goals

In this session, we're going to build together three simple container images.

In particular we'll cover:
* one RStudio image;
* one Conda image;
* one image where we're building the software ourselves.

As we've seen in the dedicated webinar, here the key tool is not Singularity but Docker, due to the higher compatibility and overwhelming popularity of its container image format.  
We're going to touch on relevant aspects of writing a Dockerfile:
* choosing an appropriate base image;
* using `RUN` to execute commands;
* using `ENV` to define environment variables;
* other useful commands.

We'll see how to convert images for usage with Singularity.  
Finally, we will review together some more articulated Dockerfiles available online, to get further insights on useful constructs and best practices.

To brush up on building container images with Docker, you can refer to the webinar episode [Building images with Docker](https://pawseysc.github.io/singularity-containers/22-build-docker/index.html).

Writing a Dockerfile for a container is an art, which you can learn over time with practice  
We don't mean to be exhaustive in this session; instead, we hope to provide you with the basic and most common commands, as well as some good practices.


### GUIDED - Let's have a look at the Dockerfile for R Tidyverse



### ROOM - Write an R Dockerfile


### ROOM - Write a Conda Dockerfile


### ROOM - Build SAMtools in a container




### ROOM - Feeder questions



### DEMO - Push the image onto Docker Hub

### GUIDED - Convert the image into Singularity Image Format

### GUIDED - Best practices