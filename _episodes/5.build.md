---
title: "Session 3: building containers"
teaching: 10
exercises: 50
questions:
objectives:
---


### Goals

In this session, we're going to build together three simple container images.

In particular we'll cover:
* one RStudio image;
* one Conda image;
* one image where we're building the software ourselves.

As we've seen in the dedicated webinar, here the key tool is not Singularity but Docker, due to the higher compatibility and overwhelming popularity of its container image format.  
We're going to touch on relevant aspects of writing a Dockerfile:
* choosing an appropriate base image;
* using `RUN` to execute commands;
* using `ENV` to define environment variables;
* other useful commands;
* best practices.

Finally, we'll see how to share Docker images on a public registry, and how to convert them for usage with Singularity.

To brush up on building container images with Docker, you can refer to the webinar episode [Building images with Docker](https://pawseysc.github.io/singularity-containers/22-build-docker/index.html).

Writing a Dockerfile for a container is an art, which you can learn over time with practice  
We don't mean to be exhaustive in this session; instead, we hope to provide you with the basic and most common commands, as well as some good practices.


### GUIDED - Let's have a look at the Dockerfile for R Tidyverse



### ROOM - Write an R Dockerfile


### ROOM - Write a Conda Dockerfile


### ROOM - Build a tool in a container




### ROOM - Feeder questions



### GUIDED - Share and convert the image


### GUIDED - Best practices